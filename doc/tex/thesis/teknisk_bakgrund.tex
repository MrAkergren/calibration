\section{Teknisk bakgrund} % (fold)
\label{sec:teknisk_bakgrund}
    \subsection{Parans SP3} % (fold)
    \label{sub:parans_sp3}
        SP3 är tredje generationens solpanel utvecklad av Parans \cite{parans_manual}. Panelen monteras på utsidan av en byggnad, ofta på taket, och fokuserar solljus genom linser in i optisk fiber för att sedan genom armatur lysa upp inomhus. Varje panel har sex utgående kablar med fiberoptik, vardera ansluten till en armatur, vilkas räckvidd är upp till 20 meter. Panelen är utformad så att ultaviolett och infrarött ljus avskärmas från det ljus som leds in i fibern. Två stegmotorer används för att justera panelens riktning horisontellt och vertikalt, styrda av ett mikrokontrollerkort, så att linserna alltid är vända mot solen. Motorernas rörelser bestäms av en algoritm i mjukvaran som räknar ut solens nuvarande position med hjälp av att kombinera mätvärden från en ljussensor och solens förväntade position på himlen baserat på tid, datum och installationsplatsens geografiska position angivet i longitud och latitud. Mjukvaran som körs på mikrokontrollern är skriven i \texttt{C}.

        \subsubsection{Mikrokontrollerkortet} % (fold)
        \label{ssub:mikrokontrollerkortet}
            Mikrokontrollerkortet som används i panelen är formgivet av Parans och är baserat på en PIC32 mikrokontroller. PIC32 är en kategori mikrokontroller tillverkade av Microchip Technology för användning i inbyggda system och ger tillgång till bland annat flera I/O-anslutningar och UART för seriell kommunikation \cite[s.~42--44]{PIC32}. För att kommunicera med mikrokontrollerkortet med en dator finns en USB-port som ger en seriell anslutning som hanteras av en UART-krets från Silicon Laboratories, CP2102. Detta kräver att den anslutna datorn har en drivrutin för CP2102 installerad och möjliggör anslutning via en terminalemulator för installation, diagnostik och underhåll.
        % subsubsection mikrokontrollerkortet (end)

        \subsubsection{Fiberoptik} % (fold)
        \label{ssub:fiberoptik}
            Den fiberoptiska kabel som i dagsläget används av Parans är en plastfiber som har en ljusöverföring om 96 \% per meter och saluförs i fyra olika längder, 5, 10, 15 och 20 meter \cite{parans_spec}. Var kabel består av sex stycken fibrer och ger ett ljusflöde om 730 lm till 430 lm beroende på längd av kablaget. Vid fibrernas paneländar finns IR-speglar monterade som reflekterar den infraröda delen av solljuset och de används för att fibern annars riskerar att smälta.
        % subsubsection fiberoptik (end)

        \subsubsection{Ljussensor} % (fold)
        \label{ssub:ljussensor}
            För att optimera ljusintaget i panelens fibrer, finjusteras vinkeln till solen med hjälp av en ljuskänslig krets monterad på panelens front. Kretsen skyddas av ett gråfilter med 10 \% ljusgenomsläpp för att dämpa solljusets intensitet. Via en lins fokuseras genomträngande ljus till en fokuspunkt på sensorn som ger ett utslag och kretsen omvandlar denna data till fyra strömmar vilkas värden representerar avståndet från sensorns mittpunkt, sett ur en programmerares synvinkel hanteras x- och y-värden på ett koordinatsystem. Själva ljussensorn är tillverkad av Hamamatsu, med beteckningen S5901, och sitter integrerad på en egendesignat mönsterkort. Det exakta databladet för den använda sensorn har ej kunnat lokaliserats men enligt den information som finns inom Parans kan den antas arbeta efter samma princip som sensorerna S5990-01 och S5991-01 \cite{hama}.
        % subsubsection ljussensor (end)
    % subsection parans_sp3 (end)

    \subsection{Arduino} % (fold)
        \subsubsection{Arduino Uno R3} % (fold)
        \label{ssub:arduino_uno}
            Arduino Uno är ett mikrokontrollerkort som innehåller mikrokontrollern ATMega328, USB-anslutning och 20 pins, 6 analoga och 14 digitala, för att ansluta externa enheter och kringutrustning \cite[kap.~1]{ard_internals}. Mikrokontrollern är en del av AVR-serien från Atmel och den har en RISC-baserad processor, 32 KB flashminne för lagring av programkod och 2 KB internminne. ATMega328 har också en UART som möjliggör seriell kommunikation enligt RS-232. Plattformen för Arduino, där Uno är en implementering, är öppen och det är fritt för var och en att bygga sina egna mikrokontrollerkort enligt tillgängliga scheman. Till Arduino tillhandahålls även en tillhörande utvecklingsmiljö som möjliggör programmering via en dator och ger tillgång till exempelkod och färdigskrivna kodbibliotek. Kod till Arduinoenheter skrivs i Arduinos egen implementation av språken C och C++ \cites[kap.~2]{ard_c}{ard_cplusplus}.
        % subsubsection arduino_uno (end)

        \subsubsection{Adafruit TSL2591 Digital Light Sensor}
        \label{ssub:ada_tsl2591}
            Sensorkortet från Adafruit innehåller ljussensorn TSL2591 från ams och används till att uppmäta ljusintensitet upp till 88 000 lux och kan anslutas till en mikrokontroller via I²C. På sensorn finns två fotodioder, där den ena reagerar på IR-ljus och den andra reagerar på fullspektrumjus \cite{TSL2591}. Fotodiodernas avläsning kan ske oberoende av varandra eller kombineras vilket möjliggör avläsning av endast synligt ljus. Sensorns värden avläses digitalt.
        % subsubsection ada_tsl2591 (end)
    % subsection arduino (end)

    \subsection{Yoctopuce Yocto-Light-V3} % (fold)
    \label{sub:yocto}
        Yocto-Light-V3 är en luxmätare i form av ett kretskort, baserad på ljussensorn BH1751FVI från ROHM, som är avsedd att mäta synligt ljus upp till 100 000 lux \cite{yocto}. Kretskortet har en USB-port för anslutning till dator och kräver ingen extra drivrutin mer än de som medföljer vanliga operativsystem för att användas. Tillverkaren Yoctopuce tillhandahåller kodbibliotek till flera vanligt förekommande programmeringsspråk som möjliggör avläsning av sensorvärden.
    % subsection yocto (end)
% section teknisk_bakgrund (end)